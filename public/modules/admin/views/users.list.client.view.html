<section class="app-section widgets-list" data-ng-controller="AdminController as admin" data-ng-init="findUsers()">

    <div class="bg-light lter b-b wrapper-md">
        <h1 class="m-n font-thin h3" >Список пользователей</h1>
    </div>

    <div class="wrapper-md">
        <div class="panel panel-default">

            <div class="table-responsive">
                <table class="table table-striped">

                    <thead>
                    <tr>
                        <th>Дата регистрации</th>
                        <th>Имя пользователя</th>
                        <th>Email</th>
                        <th>Состояние счета</th>
                        <th></th>
                    </tr>
                    </thead>

                    <tbody>
                    <tr data-ng-repeat="user in users">
                        <td><span data-ng-bind="user.date"></span></td>
                        <td><span data-ng-bind="user.username"></span></td>
                        <td><span data-ng-bind="user.email"></span></td>
                        <td>
                            <div ng-bind-html="formatMoney(user.money, user.currency.name)"></div>
                            <div>{{user.notifications}}({{user.notifications_max}})</div>
                        </td>
                        <td>
                            <a href class="action-button"
                               ng-click="editUser(user._id)"
                               ui-sref="app.editUser({ userId: user._id })">Редактировать
                            </a>
                            <a href class="action-button"
                               ng-click="loginAsUser(user._id)">Залогиниться как пользователь
                            </a>
                            <a href class="action-button"
                               ng-click="deleteUser(user._id)">Удалить
                            </a>
                        </td>
                    </tr>
                    </tbody>

                </table>
            </div>

        </div>
    </div>
</section>
<script type="text/ng-template" id="confirmUserDelete.html">
    <div class="modal-header">
        <h3 class="modal-title">Удаление пользователя</h3>
    </div>
    <div class="modal-body">
        {{text}}
    </div>
    <div class="modal-footer">
        <button data-ng-show="canBeDeleted" class="btn btn-danger" ng-click="ok()">OK</button>
        <button class="btn btn-default" ng-click="cancel()">Отмена</button>
    </div>
</script>